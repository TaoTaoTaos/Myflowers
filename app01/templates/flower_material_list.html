{% extends 'base.html' %}

{% block title %}花材管理页面{% endblock %}

{% block extra_css %}
th, td {
  text-align: center;
}

{% endblock %}

{% block content %}

<section class="section">
  <div class="row">
    <div class="col-lg-12">
      
      <h3 class="card-title">花材管理</h3>
      <a href="{% url 'add_flower_material' %}" class="btn btn-primary mb-3">添加花材</a>

      <div class="table-bordered">
        <table class="table table-hover table-fixed align-middle" id="flower-materials-table">
          <thead>
            <tr>
              <th style="text-align: center;">编号</th>
              <th style="text-align: center;">分类</th>
              <th style="text-align: center;">型号</th>
              <th style="text-align: center;">图片</th>
              <th style="text-align: center;">中文名</th>
              <th style="text-align: center;">英文名</th>
              
              <th style="text-align: center;">规格</th>
            
              
            
              <th style="text-align: center;" >装箱数量</th>
              
              <th style="text-align: center;">销售商</th>
              <th style="text-align: center;">采购价一</th>
              <th style="text-align: center;">采购价二</th>
              <th style="text-align: center;">添加人</th>
              
            </tr>
          </thead>
          <tbody>
            {% for material in flower_materials %}
            <tr onclick="window.location.href='{% url 'flower_material_detail' material.model %}'">
              <td style="text-align: center;">{{ forloop.counter }}</td>
              <td style="text-align: center;">{{ material.category.name }}</td>
              <td style="text-align: center;">{{ material.model }}</td>
              <td style="text-align: center;" class="fixed-image-cell">
                {% if material.image %}
                <img src="{{ material.image.url }}" alt="图片" height="100" width="100">
                {% else %}
                无图片
                {% endif %}
              </td>
              <td style="text-align: center;">{{ material.chinese_name }}</td>
              <td style="text-align: center;">{{ material.english_name }}</td>
              
              <td style="text-align: center;">{{ material.chineses_specifications }}</td>
            
              
              
              <td style="text-align: center;">{{ material.packing_quantity }}</td>
            
              <td style="text-align: center;">{{ material.supplier.name }}</td>
              <td style="text-align: center;">{{ material.price_one }}</td>
              <td style="text-align: center;">{{ material.price_two }}</td>
              <td style="text-align: center;">{{ material.created_by.name }}</td>
             
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" defer></script>

<script>
  // 初始化 Simple DataTables
  document.addEventListener('DOMContentLoaded', function() {
    const dataTable = new simpleDatatables.DataTable("#flower-materials-table", {
      searchable: true,
      fixedHeight: true,
      perPageSelect: [5, 10, 15, 20, 30, 500],
      perPage: 10,
      labels: {
        placeholder: "搜索...",
        perPage: "条记录 每页",
        noRows: "没有找到符合条件的记录",
        info: "显示第 {start} 到 {end} 条记录，总共 {rows} 条记录",
      },
    });
  });
</script>

{% endblock %}
