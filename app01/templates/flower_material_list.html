{% extends 'base.html' %}

{% block title %}花材管理页面{% endblock %}

{% block extra_css %}
<style>
  /* 添加自定义的 CSS 样式来固定表头 */
  .table-fixed thead {
    position: sticky;
    top: 0;
    z-index: 1;
    background-color: #fff; /* 可根据需要调整背景色 */
  }
  
  /* 美化表格样式 */
  .table-striped {
    width: 100%;
    border-collapse: collapse;
  }

  .table-striped th,
  .table-striped td {
    border: 1px solid #dee2e6;
    padding: 8px;
    text-align: center; /* 水平居中 */
    vertical-align: middle; /* 垂直居中 */
  }

  .table-striped th {
    background-color: #f8f9fa; /* 表头背景色 */
    font-weight: bold;
  }

  .table-striped tbody tr:nth-of-type(odd) {
    background-color: #f2f2f2;
  }

  .table-striped img {
    max-width: 100px;
    max-height: 100px;
  }

  .btn {
    margin: 2px; /* 按钮间隔 */
  }
</style>
{% endblock %}

{% block content %}
<section class="section">
  <div class="row">
    <div class="col-lg-12">

      <div class="card custom-width">
        <div class="card-body">
          <h5 class="card-title">花材管理</h5>
            <a href="{% url 'add_flower_material' %}" class="btn btn-primary mb-3">添加花材</a>

          <div class="table-responsive">
            <table class="table table-striped table-fixed" id="flower-materials-table">
              <thead>
                <tr>
                  <th>分类</th>
                  <th>型号</th>
                  <th>图片</th>
                  <th>中文名</th>
                  <th>英文名</th>
                  <th>学名</th>
                  <th>尺寸(cm)</th>
                  <th>重量(g)</th>
                  <th>销售规格</th>
                  <th>工艺</th>
                  <th>外箱尺寸(cm)</th>
                  <th>装箱数量</th>
                  <th>等级</th>
                  <th>销售商</th>
                  <th>采购价一</th>
                  <th>采购价二</th>
                  <th>添加人</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                {% for material in flower_materials %}
                <tr>
                  <td>{{ material.category.name }}</td>
                  <td>{{ material.model }}</td>
                  <td>
                    {% if material.image %}
                    <img src="{{ material.image.url }}" alt="图片">
                    {% else %}
                    无图片
                    {% endif %}
                  </td>
                  <td>{{ material.chinese_name }}</td>
                  <td>{{ material.english_name }}</td>
                  <td>{{ material.scientific_name }}</td>
                  <td>{{ material.size }}</td>
                  <td>{{ material.weight }}</td>
                  <td>{{ material.sale_spec }}</td>
                  <td>{{ material.process.name }}</td>
                  <td>{{ material.outer_box_size }}</td>
                  <td>{{ material.packing_quantity }}</td>
                  <td>{{ material.grade }}</td>
                  <td>{{ material.supplier.name }}</td>
                  <td>{{ material.price_one }}</td>
                  <td>{{ material.price_two }}</td>
                  <td>{{ material.created_by.name }}</td>
                  <td>
                    <a href="{% url 'flower_material_edit' material.id %}" class="btn btn-sm btn-warning">编辑</a>
                    <a href="{% url 'flower_material_delete' material.id %}" class="btn btn-sm btn-danger">删除</a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<script>
  // 初始化 Simple DataTables
  document.addEventListener('DOMContentLoaded', function() {
    const dataTable = new simpleDatatables.DataTable("#flower-materials-table", {
      searchable: true,
      fixedHeight: true,
      perPageSelect: [5, 10, 15, 20],
      perPage: 10,
      labels: {
        placeholder: "搜索...",
        perPage: "条记录 每页",
        noRows: "没有找到符合条件的记录",
        info: "显示第 {start} 到 {end} 条记录，总共 {rows} 条记录",
      },
    });
  });
</script>

{% endblock %}
