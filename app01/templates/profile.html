{% extends 'base.html' %}

{% block title %}
  用户个人页面 - {{ user.username }}
{% endblock %}

{% block extra_css %}
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
  <style>
    .form-section {
      margin-bottom: 30px;
    }
  </style>
{% endblock %}

{% block content %}
  <div class="container mt-5">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">个人资料</h3>
          </div>
          <div class="card-body">
            <form method="post" enctype="multipart/form-data" class="form-section">
              {% csrf_token %}
              <div class="form-group row">
                <label for="username" class="col-md-2 col-form-label">用户名</label>
                <div class="col-md-10">
                  {{ user_form.username }}
                </div>
              </div>
              <div class="form-group row">
                <label for="first_name" class="col-md-2 col-form-label">姓</label>
                <div class="col-md-10">
                  {{ user_form.first_name }}
                </div>
              </div>
              <div class="form-group row">
                <label for="last_name" class="col-md-2 col-form-label">名</label>
                <div class="col-md-10">
                  {{ user_form.last_name }}
                </div>
              </div>
              <div class="form-group row">
                <label for="email" class="col-md-2 col-form-label">邮箱</label>
                <div class="col-md-10">
                  {{ user_form.email }}
                </div>
              </div>
              <div class="form-group row">
                <label for="is_active" class="col-md-2 col-form-label">是否活跃</label>
                <div class="col-md-10">
                  {{ user_form.is_active }}
                </div>
              </div>
              <div class="form-group row">
                <label for="is_staff" class="col-md-2 col-form-label">是否职员</label>
                <div class="col-md-10">
                  {{ user_form.is_staff }}
                </div>
              </div>
              <div class="form-group row">
                <label for="is_superuser" class="col-md-2 col-form-label">是否超级用户</label>
                <div class="col-md-10">
                  {{ user_form.is_superuser }}
                </div>
              </div>
              <div class="form-group row">
                <label for="last_login" class="col-md-2 col-form-label">上次登录时间</label>
                <div class="col-md-10">
                  {{ user_form.last_login }}
                </div>
              </div>
              <div class="form-group row">
                <label for="date_joined" class="col-md-2 col-form-label">加入日期</label>
                <div class="col-md-10">
                  {{ user_form.date_joined }}
                </div>
              </div>
              <div class="text-center">
                <button type="submit" class="btn btn-primary" name="update_profile">保存修改</button>
              </div>
            </form>
            
            <h5 class="card-title mt-5">修改密码</h5>
            <form method="post">
              {% csrf_token %}
              <div class="form-group row">
                <label for="current_password" class="col-md-2 col-form-label">当前密码</label>
                <div class="col-md-10">
                  {{ password_form.old_password }}
                </div>
              </div>
              <div class="form-group row">
                <label for="new_password1" class="col-md-2 col-form-label">新密码</label>
                <div class="col-md-10">
                  {{ password_form.new_password1 }}
                </div>
              </div>
              <div class="form-group row">
                <label for="new_password2" class="col-md-2 col-form-label">再次输入新密码</label>
                <div class="col-md-10">
                  {{ password_form.new_password2 }}
                </div>
              </div>
              <div class="text-center">
                <button type="submit" class="btn btn-primary" name="change_password">修改密码</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
{% endblock %}
